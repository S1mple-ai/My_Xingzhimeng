# æ™ºèƒ½å¾…åŠäº‹é¡¹ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²æŒ‡å—

## ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æœ¬åœ°å¼€å‘ç¯å¢ƒ](#æœ¬åœ°å¼€å‘ç¯å¢ƒ)
3. [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
4. [äº‘å¹³å°éƒ¨ç½²é€‰é¡¹](#äº‘å¹³å°éƒ¨ç½²é€‰é¡¹)
5. [åŸŸåå’ŒSSLé…ç½®](#åŸŸåå’Œsslé…ç½®)
6. [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
7. [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)
8. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„æ™ºèƒ½å¾…åŠäº‹é¡¹ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š
- ä»»åŠ¡åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- ä»»åŠ¡åˆ†ç±»ç®¡ç†
- ä¼˜å…ˆçº§è®¾ç½®
- å¼€å§‹æ—¥æœŸå’Œæˆªæ­¢æ—¥æœŸ
- æ‹–æ‹½æ’åº
- æ‰¹é‡æ“ä½œ
- æœç´¢å’Œè¿‡æ»¤
- å“åº”å¼è®¾è®¡

## æœ¬åœ°å¼€å‘ç¯å¢ƒ

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- pip (PythonåŒ…ç®¡ç†å™¨)
- Git

### å®‰è£…æ­¥éª¤
1. å…‹éš†é¡¹ç›®
```bash
git clone <your-repository-url>
cd My_Todo
```

2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

4. åˆå§‹åŒ–æ•°æ®åº“
```bash
python -c "from app import app, db; app.app_context().push(); db.create_all()"
```

5. è¿è¡Œåº”ç”¨
```bash
python app.py
```

è®¿é—® http://127.0.0.1:5000 æŸ¥çœ‹åº”ç”¨

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨Gunicorn + Nginx (æ¨è)

#### 1. æœåŠ¡å™¨å‡†å¤‡
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦è½¯ä»¶
sudo apt install python3 python3-pip python3-venv nginx git -y
```

#### 2. éƒ¨ç½²åº”ç”¨
```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /var/www/todo-app
cd /var/www/todo-app

# å…‹éš†ä»£ç 
sudo git clone <your-repository-url> .

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
sudo python3 -m venv venv
sudo chown -R www-data:www-data /var/www/todo-app

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
sudo -u www-data /var/www/todo-app/venv/bin/pip install -r requirements.txt
sudo -u www-data /var/www/todo-app/venv/bin/pip install gunicorn
```

#### 3. åˆ›å»ºGunicorné…ç½®
åˆ›å»º `/var/www/todo-app/gunicorn.conf.py`:
```python
bind = "127.0.0.1:8000"
workers = 4
worker_class = "sync"
worker_connections = 1000
max_requests = 1000
max_requests_jitter = 100
timeout = 30
keepalive = 2
user = "www-data"
group = "www-data"
tmp_upload_dir = None
errorlog = "/var/log/gunicorn/error.log"
accesslog = "/var/log/gunicorn/access.log"
loglevel = "info"
```

#### 4. åˆ›å»ºsystemdæœåŠ¡
åˆ›å»º `/etc/systemd/system/todo-app.service`:
```ini
[Unit]
Description=Todo App Gunicorn daemon
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/todo-app
Environment="PATH=/var/www/todo-app/venv/bin"
ExecStart=/var/www/todo-app/venv/bin/gunicorn --config gunicorn.conf.py app:app
ExecReload=/bin/kill -s HUP $MAINPID
Restart=always

[Install]
WantedBy=multi-user.target
```

#### 5. é…ç½®Nginx
åˆ›å»º `/etc/nginx/sites-available/todo-app`:
```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static/ {
        alias /var/www/todo-app/static/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 6. å¯åŠ¨æœåŠ¡
```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
sudo mkdir -p /var/log/gunicorn
sudo chown www-data:www-data /var/log/gunicorn

# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
sudo systemctl enable todo-app
sudo systemctl start todo-app

# é…ç½®Nginx
sudo ln -s /etc/nginx/sites-available/todo-app /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Dockeréƒ¨ç½²

#### 1. åˆ›å»ºDockerfile
```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

RUN python -c "from app import app, db; app.app_context().push(); db.create_all()"

EXPOSE 5000

CMD ["gunicorn", "--bind", "0.0.0.0:5000", "app:app"]
```

#### 2. åˆ›å»ºdocker-compose.yml
```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - ./instance:/app/instance
    environment:
      - FLASK_ENV=production
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - web
    restart: unless-stopped
```

#### 3. éƒ¨ç½²å‘½ä»¤
```bash
docker-compose up -d
```

## äº‘å¹³å°éƒ¨ç½²é€‰é¡¹

### 1. Heroku (æœ€ç®€å•)

#### å‡†å¤‡æ–‡ä»¶
åˆ›å»º `Procfile`:
```
web: gunicorn app:app
```

åˆ›å»º `runtime.txt`:
```
python-3.9.18
```

#### éƒ¨ç½²æ­¥éª¤
```bash
# å®‰è£…Heroku CLI
# ç™»å½•Heroku
heroku login

# åˆ›å»ºåº”ç”¨
heroku create your-app-name

# è®¾ç½®ç¯å¢ƒå˜é‡
heroku config:set FLASK_ENV=production

# éƒ¨ç½²
git add .
git commit -m "Deploy to Heroku"
git push heroku main
```

### 2. DigitalOcean App Platform

1. è¿æ¥GitHubä»“åº“
2. é€‰æ‹©Pythonåº”ç”¨
3. è®¾ç½®æ„å»ºå‘½ä»¤ï¼š`pip install -r requirements.txt`
4. è®¾ç½®è¿è¡Œå‘½ä»¤ï¼š`gunicorn --worker-tmp-dir /dev/shm app:app`
5. é…ç½®ç¯å¢ƒå˜é‡

### 3. AWS Elastic Beanstalk

1. å®‰è£…EB CLI
2. åˆå§‹åŒ–ï¼š`eb init`
3. åˆ›å»ºç¯å¢ƒï¼š`eb create production`
4. éƒ¨ç½²ï¼š`eb deploy`

### 4. Google Cloud Run

```bash
# æ„å»ºé•œåƒ
gcloud builds submit --tag gcr.io/PROJECT-ID/todo-app

# éƒ¨ç½²
gcloud run deploy --image gcr.io/PROJECT-ID/todo-app --platform managed
```

## åŸŸåå’ŒSSLé…ç½®

### 1. è´­ä¹°åŸŸå
æ¨èåŸŸåæ³¨å†Œå•†ï¼š
- Namecheap
- GoDaddy
- é˜¿é‡Œäº‘
- è…¾è®¯äº‘

### 2. DNSé…ç½®
å°†åŸŸåæŒ‡å‘æœåŠ¡å™¨IPï¼š
```
Aè®°å½•: @ -> ä½ çš„æœåŠ¡å™¨IP
Aè®°å½•: www -> ä½ çš„æœåŠ¡å™¨IP
```

### 3. SSLè¯ä¹¦é…ç½® (Let's Encrypt)

```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx -y

# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ï¼š0 12 * * * /usr/bin/certbot renew --quiet
```

## æ•°æ®åº“é…ç½®

### SQLite (é»˜è®¤ï¼Œé€‚åˆå°å‹åº”ç”¨)
æ— éœ€é¢å¤–é…ç½®ï¼Œæ•°æ®å­˜å‚¨åœ¨ `instance/tasks.db`

### PostgreSQL (æ¨èç”Ÿäº§ç¯å¢ƒ)

#### 1. å®‰è£…PostgreSQL
```bash
sudo apt install postgresql postgresql-contrib -y
```

#### 2. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
```bash
sudo -u postgres psql
CREATE DATABASE todoapp;
CREATE USER todouser WITH PASSWORD 'your-password';
GRANT ALL PRIVILEGES ON DATABASE todoapp TO todouser;
\q
```

#### 3. ä¿®æ”¹åº”ç”¨é…ç½®
åœ¨ `app.py` ä¸­æ·»åŠ ï¼š
```python
import os

# æ•°æ®åº“é…ç½®
if os.environ.get('DATABASE_URL'):
    app.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get('DATABASE_URL')
else:
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///tasks.db'
```

#### 4. è®¾ç½®ç¯å¢ƒå˜é‡
```bash
export DATABASE_URL="postgresql://todouser:your-password@localhost/todoapp"
```

### MySQLé…ç½®
```python
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://username:password@localhost/todoapp'
```

## ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç›‘æ§
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo journalctl -u todo-app -f

# æŸ¥çœ‹Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### 2. æ€§èƒ½ç›‘æ§
æ¨èå·¥å…·ï¼š
- New Relic
- Datadog
- Prometheus + Grafana

### 3. å¤‡ä»½ç­–ç•¥
```bash
# æ•°æ®åº“å¤‡ä»½è„šæœ¬
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
cp /var/www/todo-app/instance/tasks.db /backup/tasks_$DATE.db

# æ·»åŠ åˆ°crontab
0 2 * * * /path/to/backup-script.sh
```

### 4. æ›´æ–°éƒ¨ç½²
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
cd /var/www/todo-app
sudo -u www-data git pull

# é‡å¯æœåŠ¡
sudo systemctl restart todo-app
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åº”ç”¨æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status todo-app

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u todo-app -n 50
```

#### 2. æ•°æ®åº“è¿æ¥é”™è¯¯
- æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ
- éªŒè¯è¿æ¥å­—ç¬¦ä¸²
- æ£€æŸ¥ç”¨æˆ·æƒé™

#### 3. é™æ€æ–‡ä»¶æ— æ³•åŠ è½½
- æ£€æŸ¥Nginxé…ç½®
- éªŒè¯æ–‡ä»¶è·¯å¾„å’Œæƒé™

#### 4. 502 Bad Gateway
- æ£€æŸ¥Gunicornæ˜¯å¦è¿è¡Œ
- éªŒè¯ç«¯å£é…ç½®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–
```python
# æ·»åŠ æ•°æ®åº“ç´¢å¼•
class Task(db.Model):
    # ... å…¶ä»–å­—æ®µ
    created_at = db.Column(db.DateTime, default=datetime.utcnow, index=True)
    completed = db.Column(db.Boolean, default=False, index=True)
```

#### 2. ç¼“å­˜é…ç½®
```python
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'simple'})

@app.route('/api/stats')
@cache.cached(timeout=300)  # ç¼“å­˜5åˆ†é’Ÿ
def get_stats():
    # ... ç»Ÿè®¡é€»è¾‘
```

#### 3. é™æ€æ–‡ä»¶CDN
ä½¿ç”¨CloudFlareæˆ–AWS CloudFrontåŠ é€Ÿé™æ€æ–‡ä»¶è®¿é—®ã€‚

## å®‰å…¨å»ºè®®

1. **ç¯å¢ƒå˜é‡**ï¼šæ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç¯å¢ƒå˜é‡
2. **HTTPS**ï¼šå¼ºåˆ¶ä½¿ç”¨SSL
3. **é˜²ç«å¢™**ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£
4. **å®šæœŸæ›´æ–°**ï¼šä¿æŒç³»ç»Ÿå’Œä¾èµ–åŒ…æ›´æ–°
5. **å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½æ•°æ®
6. **ç›‘æ§**ï¼šè®¾ç½®å¼‚å¸¸å‘Šè­¦

## æˆæœ¬ä¼°ç®—

### åŸºç¡€VPSæ–¹æ¡ˆ (æ¨èæ–°æ‰‹)
- DigitalOcean Droplet: $5-10/æœˆ
- åŸŸå: $10-15/å¹´
- æ€»æˆæœ¬: ~$70-135/å¹´

### äº‘å¹³å°æ–¹æ¡ˆ
- Heroku: $7/æœˆ (Hobby tier)
- Vercel: å…è´¹ (ä¸ªäººé¡¹ç›®)
- Railway: $5/æœˆ

é€‰æ‹©å»ºè®®ï¼š
- **å­¦ä¹ /ä¸ªäººé¡¹ç›®**ï¼šHerokuå…è´¹å±‚æˆ–Vercel
- **å°å‹å•†ä¸šé¡¹ç›®**ï¼šDigitalOcean VPS
- **ä¼ä¸šçº§åº”ç”¨**ï¼šAWS/GCP/Azure

## è”ç³»æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹é¡¹ç›®GitHub Issues
2. å‚è€ƒFlaskå®˜æ–¹æ–‡æ¡£
3. æœç´¢ç›¸å…³æŠ€æœ¯ç¤¾åŒº

ç¥æ‚¨éƒ¨ç½²æˆåŠŸï¼ğŸ‰